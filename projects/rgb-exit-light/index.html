<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> RGB Exit Light | Max Fan </title> <meta name="author" content="Max Fan"> <meta name="description" content="May - Jun 2024"> <meta name="keywords" content="mechanical, jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%99%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://mxfn.github.io/projects/rgb-exit-light/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Max</span> Fan </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item active"> <a class="nav-link" href="/projects/">Projects <span class="sr-only">(current)</span> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">RGB Exit Light</h1> <p class="post-description">May - Jun 2024</p> </header> <article> <div class="row justify-content-center"> <div class="col-sm-8"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/rgb_exit_light/rgb_exit_light_ecad-480.webp 480w,/assets/img/rgb_exit_light/rgb_exit_light_ecad-800.webp 800w,/assets/img/rgb_exit_light/rgb_exit_light_ecad-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/rgb_exit_light/rgb_exit_light_ecad.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" alt="rgb exit light ecad" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>One day, my friend moved out of town and donated a lot of his things. Among the things he donated was an exit light. I held onto it for a while, and eventually I thought it would be fun to develop my PCB skills by making it flash through random RGB colors instead of glowing with a constant, boring red light. Since the function was relatively simple and I was using an Arduino, the challenge was not with designing the schematic or the Arduino code. Rather, the challenge was learning how to use ECAD software (EasyEDA in this case) and how to use a standalone Arduino chip (ATmega328P with a TQFP footprint) instead of an Arduino board.</p> <div class="row justify-content-center"> <div class="col-sm-4 mt-3"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/rgb_exit_light/many_boards-480.webp 480w,/assets/img/rgb_exit_light/many_boards-800.webp 800w,/assets/img/rgb_exit_light/many_boards-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/rgb_exit_light/many_boards.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" alt="five pcb boards" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/rgb_exit_light/exit_symbol_silkscreen-480.webp 480w,/assets/img/rgb_exit_light/exit_symbol_silkscreen-800.webp 800w,/assets/img/rgb_exit_light/exit_symbol_silkscreen-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/rgb_exit_light/exit_symbol_silkscreen.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" alt="exit symbol silkscreen" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/rgb_exit_light/chip_closeup-480.webp 480w,/assets/img/rgb_exit_light/chip_closeup-800.webp 800w,/assets/img/rgb_exit_light/chip_closeup-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/rgb_exit_light/chip_closeup.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" alt="closeup of ATmega328P chip" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>After I finished making the PCB in EasyEDA, I ordered the boards from JLCPCB. I had JLCPCB assemble some of these boards with all their SMD components. When assembling boards with JLCPCB, it’s worth noting that JLCPCB has “basic” and “extended” parts. Basic parts are common parts (e.g., resistors and capacitors) that are already on their pick and place machines whereas extended parts are parts that have to be manually loaded onto their machines. They charge $3 for each unique extended part.</p> <div class="row justify-content-center"> <div class="col-sm-10 mt-3"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/rgb_exit_light/atmega328p_pinout-480.webp 480w,/assets/img/rgb_exit_light/atmega328p_pinout-800.webp 800w,/assets/img/rgb_exit_light/atmega328p_pinout-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/rgb_exit_light/atmega328p_pinout.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" alt="ATmega328p pinout" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption mt-0"> Note that "PIN NUMBER" is the number you would see on a schematic, "ARDUINOPIN" is the number you would write in your Arduino sketch. When referring to a pin, I will use the pin number by default. </div> </div> </div> <div class="row justify-content-center"> <div class="col-sm-10 mt-3"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/rgb_exit_light/atmega328p_schematic-480.webp 480w,/assets/img/rgb_exit_light/atmega328p_schematic-800.webp 800w,/assets/img/rgb_exit_light/atmega328p_schematic-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/rgb_exit_light/atmega328p_schematic.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" alt="schematic of ATmega328p and essential peripherals" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption mt-0"> Schematic I made showing the essential peripherals and connections of the ATmega328P TQFP-32 chip. This schematic is applicable to any project using this chip. </div> </div> </div> <p>In order to use the ATmega328P chip on my board, I needed to first include some peripherals and burn the bootloader onto the chip. I used <a href="https://youtu.be/J3DYgzRvLT8?t=124" rel="external nofollow noopener" target="_blank">GreatScott’s video</a> to figure out where to attach peripherals like a 16 MHz crystal oscillator (pin numbers 7 and 8), two 22 pF capacitors (pin number 7, 8), and a 10k pullup resistor (pin number 29) as well as which pins should be connected to VCC (pin numbers 4, 6, and 18) and ground (pin numbers 5 and 21). The exact connections I used are shown in my schematic above.</p> <div class="row justify-content-center"> <div class="col-sm-8 mt-3"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/rgb_exit_light/bootloader-480.webp 480w,/assets/img/rgb_exit_light/bootloader-800.webp 800w,/assets/img/rgb_exit_light/bootloader-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/rgb_exit_light/bootloader.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" alt="bootloader connected to arduino chip" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Since the ATmega328P did not come with a bootloader, I burned the bootloader onto the chip using <a href="https://support.arduino.cc/hc/en-us/articles/4841602539164-Burn-the-bootloader-on-UNO-Mega-and-classic-Nano-using-another-Arduino" rel="external nofollow noopener" target="_blank">this Arduino guide</a> and a spare Arduino Uno. Specifically, I connected Arduino pin 10 of the Uno to the chip’s reset (pin number 29) and Arduino pins 11, 12, and 13 of the Uno (corresponding to COPI, CIPO, and SCK) to the chip’s pin numbers 15, 16, and 17. I then connected the Uno’s 5V and ground connections to the 5V and ground connections of the chip and proceeded with burning the bootloader using the Arduino IDE. To make connecting the pins of the Uno to the pins of the chip as easy as possible, on my PCB I added female header pins and made sure to keep them in the same order as the chip’s pin numbers in my schematic.</p> <p>To upload my sketch to the chip, I once again used <a href="https://youtu.be/J3DYgzRvLT8?t=188" rel="external nofollow noopener" target="_blank">GreatScott’s video</a> as a guide. Since the chip of my spare Arduino Uno was in a removable DIP package, I removed the Uno’s chip and connected the Uno board’s TX, RX, reset, and ground pins to the corresponding pins on the PCB chip (pin numbers 29, 30, 31, and 3) and uploaded my sketch.</p> <div class="row justify-content-center"> <div class="col-sm-8 mt-3"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/rgb_exit_light/powered_on-480.webp 480w,/assets/img/rgb_exit_light/powered_on-800.webp 800w,/assets/img/rgb_exit_light/powered_on-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/rgb_exit_light/powered_on.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" alt="closeup of powered on rgb exit light pcb" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>After uploading my sketch, the Arduino worked as intended. I made some tweaks to the hardware by adding a translucent acrylic panel to the front (for diffusing light), adding a mirror to the back (to increase the brightness of the front), and soldering in brighter LEDs, and then it was done. In addition to giving me experience with ECAD and using Arduino chips in PCBs, it had the unexpected benefit of serving as a nice night light for my room.</p> <div class="embed-responsive embed-responsive-16by9 mt-4 mb-3"> <iframe width="560" height="315" src="https://www.youtube.com/embed/PNP6WPLyQ8k?si=ngVG9VByDkrPigTs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe> </div> </article> </div> </div> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> </body> </html>